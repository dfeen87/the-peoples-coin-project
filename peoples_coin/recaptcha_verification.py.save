ç≈Ω≈ç√√√∫√ç≈import os
import requests

def verify_recaptcha_v2(token: str) -> bool:
    """
    Verifies a reCAPTCHA v2 token with Google.

    Args:
        token: The 'g-recaptcha-response' token from the frontend form.

    Returns:
        True if the token is valid, False otherwise.
    """
    # 1. Get your v2 Secret Key from an environment variable.
    secret_key = os.getenv("RECAPTCHA_V2_SECRET_KEY")
    if not secret_key:
        print("Error: RECAPTCHA_V2_SECRET_KEY environment variable is not set.")
        return False

    # 2. Make the verification request to Google.
    verification_url = "https://www.google.com/recaptcha/api/siteverify"
    payload = {
        "secret": secret_key,
        "response": token,
    }

    try:
        response = requests.post(verification_url, data=payload, timeout=5)
        response_data = response.json()
        
        # 3. Check if Google says the verification was successful.
        return response_data.get("success", False)
   




       
    except requests.exceptions.RequestException as e:
        print(f"Error during reCAPTCHA verification: {e}")
        return False
